{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapState } from 'vuex';\nexport default {\n  name: 'Trade',\n\n  data() {\n    return {\n      message: '',\n      orderId: ''\n    };\n  },\n\n  mounted() {\n    this.$store.dispatch('getUserAdress');\n    this.$store.dispatch('getOrderInfo');\n  },\n\n  computed: { ...mapState({\n      userAddress: state => state.trade.userAddress,\n      tradeInfo: state => state.trade.tradeInfo // orderId:state=>state.trade.payId\n\n    }),\n\n    userDefaultAddress() {\n      return this.userAddress.find(item => item.isDefault == 1) || {};\n    }\n\n  },\n  methods: {\n    chanegDefault(index, userAddress) {\n      userAddress.forEach(item => {\n        item.isDefault = '0';\n      });\n      index.isDefault = '1';\n    },\n\n    async submitOrder() {\n      let tradeNo = this.tradeInfo.tradeNo;\n      let data = {\n        \"consignee\": this.userDefaultAddress.consignee,\n        // \"consignee\": 'mai',\n        \"consigneeTel\": this.userDefaultAddress.phoneNum,\n        // \"consigneeTel\": '110',\n        \"deliveryAddress\": this.userDefaultAddress.fullAddress,\n        // \"deliveryAddress\": 'wc',\n        \"paymentWay\": \"ONLINE\",\n        \"orderComment\": this.message,\n        \"orderDetailList\": this.tradeInfo.detailArrayList\n      };\n      let result = await this.$API.reqSubmitOrder(tradeNo, data);\n\n      if (result.code == 200) {\n        this.orderId = result.data;\n        this.$router.push('/pay?orderId=' + this.orderId);\n      } else {\n        alert(result.data);\n      }\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}