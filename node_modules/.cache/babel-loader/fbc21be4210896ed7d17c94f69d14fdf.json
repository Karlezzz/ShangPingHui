{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapGetters, mapState } from 'vuex';\nimport SearchSelector from './SearchSelector/SearchSelector';\nimport Pagination from '../../components/Pagination/Pagination.vue';\nexport default {\n  name: 'Search',\n  components: {\n    SearchSelector,\n    Pagination\n  },\n\n  data() {\n    return {\n      searchParams: {\n        category1Id: \"\",\n        category2Id: \"\",\n        category3Id: \"\",\n        categoryName: \"\",\n        keyword: \"\",\n        order: \"1:desc\",\n        pageNo: 1,\n        pageSize: 10,\n        props: [],\n        trademark: \"\"\n      }\n    };\n  },\n\n  watch: {\n    $route() {\n      this.searchParams.category1Id = '';\n      this.searchParams.category2Id = '';\n      this.searchParams.category3Id = '';\n      Object.assign(this.searchParams, this.$route.query, this.$route.params);\n      this.getDate();\n    }\n\n  },\n\n  beforeMount() {\n    Object.assign(this.searchParams, this.$route.query, this.$route.params);\n  },\n\n  mounted() {\n    this.getDate();\n  },\n\n  computed: { ...mapGetters(['goodsList']),\n    ...mapState({\n      total: state => state.search.searchList.total // pageSize: state => state.search.searchList.pageSize,\n      // pageNo: state => state.search.searchList.pageNo,\n      // totalPages: state => state.search.searchList.totalPages\n\n    }),\n\n    isOne() {\n      return this.searchParams.order.indexOf('1') !== -1;\n    },\n\n    isTwo() {\n      return this.searchParams.order.indexOf('2') !== -1;\n    },\n\n    isDesc() {\n      return this.searchParams.order.indexOf('desc') !== -1;\n    },\n\n    isAsc() {\n      return this.searchParams.order.indexOf('asc') !== -1;\n    },\n\n    orderType() {\n      return this.searchParams.order.indexOf('desc') !== -1 ? 'icon-long-arrow-down' : 'icon-long-arrow-up';\n    }\n\n  },\n  methods: {\n    getDate() {\n      this.$store.dispatch('getSearchList', this.searchParams);\n    },\n\n    removeCategoryName() {\n      this.searchParams.categoryName = \"\";\n      this.$router.push({\n        name: 'search',\n        params: this.$route.params\n      });\n    },\n\n    removeCategoryKeyword() {\n      this.searchParams.keyword = '';\n      this.$router.push({\n        name: 'search',\n        query: this.$route.query\n      });\n    },\n\n    trademarkInfo(trademark) {\n      this.searchParams.trademark = `${trademark.tmId}:${trademark.tmName}`;\n      this.getDate();\n    },\n\n    removeTrademark() {\n      this.searchParams.trademark = undefined;\n      this.getDate();\n    },\n\n    attrInfo(attrId, attrValue, attrName) {\n      let prop = `${attrId}:${attrValue}:${attrName}`;\n      if (this.searchParams.props.indexOf(prop) === -1) this.searchParams.props.push(prop);\n      this.getDate();\n    },\n\n    removeAttrInfo(i) {\n      this.searchParams.props.splice(i, 1);\n      this.getDate();\n    },\n\n    changeOrder(flag) {\n      this.searchParams.order = this.searchParams.order.indexOf('desc') !== -1 ? `${flag}:asc` : `${flag}:desc`;\n      this.getDate();\n    },\n\n    getPageNo(pageNo) {\n      this.searchParams.pageNo = pageNo;\n      this.getDate();\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}